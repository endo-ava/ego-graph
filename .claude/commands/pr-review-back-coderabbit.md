---
description: PRレビュー指摘を要約・評価し、対応するためのワークフロー
---

# PRレビュー対応ワークフロー

1. **レビュー指摘の収集と要約**
   - **PR番号の確認**: 対象のPR番号が不明な場合はユーザーに確認してください。
   - PR番号: #$ARGUMENTS
   - 以下のコマンドで、PRのレビューとコメントをJSON形式で取得し、ファイルに保存します（ノイズを減らすため）。

     ```bash
     gh pr view <PR_NUMBER> --json reviews,comments > pr_data.json
     ```

   - 保存された `pr_data.json` を読み込み、以下の手順でレビュアーからの指摘を抽出してください。
     1. `reviews` および `comments` から、未解決のものをフィルタリングする。
     2. "walkthrough" や "summary" といった全体的な解説コメントは「概要」として扱い、個別の修正指摘とは区別する。
     3. 以下の情報をリスト化する：
        - **ファイル名と行番号**: (特定できる場合)
        - **指摘内容**: 具体的な修正指示のみを抽出（「素晴らしい実装です」などの称賛は除外）
        - **重要度**: Reviewerが指定している場合その値、なければ内容から推測

2. **妥当性の評価と方針決定**
   - 各指摘について、以下の観点で妥当性を評価し、分類します。
     - **対応する**: 指摘が妥当であり、修正が必要。
     - **対応しない**: 誤検知、または意図的な実装であるため修正不要（理由を明確にする）。
     - **要確認**: 判断に迷う場合や、設計に関わる重要な変更。
   - この評価結果をユーザーに提示し、修正方針の合意を得てください。

3. **修正の実施**
   - 合意が得られた項目について、順次コードの修正を行います。
   - 修正後は、可能な限り構文チェックや関連テストの実行を行い、整合性を確認します。

4. **対応結果の報告**
   - 全ての修正完了後、以下のフォーマットで見やすく対応内容を報告してください。

   | 対象ファイル | 修正内容 | 修正した理由 |
   | --- | --- | --- |
   | `path/to/file.py` | 関数の戻り値を修正 | CodeRabbit指摘: "..." への対応 |
   | `path/to/other.ts` | (対応なし) | 誤検知のため無視 (理由: ...) |
