# プロジェクト概要

## 1. EgoGraphとは

**EgoGraph**は、個人のあらゆるデジタル活動ログ（ライフログ）を統合し、プライバシーを最優先にした「デジタル分身」を構築するプロジェクトです。
音楽再生履歴、購買記録、Web閲覧履歴、日記など、散在する個人のデジタルフットプリントを一箇所に集約。
高度なAIエージェントを通じて、過去の自分と対話したり、行動傾向を分析したりできる基盤を提供します。

---

## 2. プロジェクトの目的

### 2.1 ビジョン

**「自分自身のデジタル分身を構築し、過去の自分と対話・分析できる未来を創る」**

私たちは、自分のデータは自分で所有し、コントロールすべきだと考えます。
クラウドサービスに分散したデータを手元に取り戻し、AIの力を使って「自分を知る」ためのツールを作ります。

### 2.2 解決する課題

| 課題 | EgoGraphによる解決 |
|---|---|
| **データの散在** | Spotify, Amazon, 銀行などのデータを単一のデータウェアハウスに統合 |
| **検索の限界** | 「回数」「合計」などの正確な事実検索と、あいまいな意味検索の両立 |
| **プライバシー** | データを外部サーバーではなく、ユーザー自身の管理下（ローカルファイル）で運用 |
| **コンテキスト** | 単なるログの羅列ではなく、AIによる「要約」を生成して文脈を保存 |

---

## 3. 基本方針 (Design Philosophy)

### 3.1 "My Data" First Architecture

インフラコストや外部サービスの制約に縛られないよう、**サーバーレスかつローカルファースト**なアーキテクチャを採用します。
事実データ（ログ）は **Parquetファイル** として管理され、ポータビリティを確保します。

### 3.2 Hybrid Intelligence (Facts + Meaning)

「正確な事実」と「あいまいな意味」の両方を扱えるよう、適材適所のエンジンを組み合わせます。

- **Transaction / Facts**: **DuckDB** がParquetを集計し、「いつ、何回、いくら使った？」に答えます。
- **Semantic / Meaning**: **Qdrant** がベクトル検索を担当し、「あの時どう感じた？」に答えます。

これらを **Agent** が統合してユーザーに届けます。

---

## 4. MVP (Minimum Viable Product)

### MVP Scope
最初のステップとして、Spotifyの再生履歴を対象に「自分だけの音楽アナリスト」を構築します。

1. **Ingest**: Spotify APIから全再生履歴を取得し、ローカルデータレイク(Parquet)に保存する。
2. **Analyze**: AgentがDuckDBとQdrantを使い分けて、「去年一番聴いたアルバムは？」「夏の夕方に聴いていた曲は？」に答える。
3. **Recall**: 音楽の聴取傾向から、その日のムードや思い出を振り返る機能を実装する。

---

## 5. ディレクトリ構造

```
ego-graph/
├── docs/                    # ドキュメント
├── ingest/                  # データ収集スクリプト (Python)
├── backend/                 # Agent API (FastAPI)
├── frontend/                # Mobile/Web App (Capacitor)
├── data/                    # ローカルデータストア (Gitignored)
└── .github/                 # 自動化ワークフロー
```
