# EgoGraph コンポーネント詳細設計

本ドキュメントは、[デザインシステム](./0002_design_system.md) に基づく、
各UIコンポーネントの具体的なデザイン仕様を定義します。

## 目次

1. [ヘッダー](#1-ヘッダー)
2. [Empty State（初期画面）](#2-empty-state初期画面)
3. [メッセージ入力エリア](#3-メッセージ入力エリア)
4. [サイドバー](#4-サイドバー)
5. [メッセージ表示](#5-メッセージ表示)
6. [その他コンポーネント](#6-その他コンポーネント)

---

## 1. ヘッダー

### デザインコンセプト

- **フラット・ボーダーのみ**: 背景なし、下部ボーダー（border-b）のみ
- **タイトル中央配置**: 「EgoGraph Chat」を画面中央に配置
- **新規チャットボタン**: アイコンのみ、右側に配置
- **ハンバーガーメニュー**: モバイルのみ表示、左側に配置

### ビジュアル仕様

```
┌─────────────────────────────────────────────────┐
│  ☰    EgoGraph Chat                    [NEW]    │ ← border-b
└─────────────────────────────────────────────────┘
 ↑                                         ↑
ハンバーガー                           新規チャット
(モバイルのみ)                          (Newボタン)
```

### スタイル仕様

- **コンテナ**: フレックスボックス横並び、`border-bottom` あり。
- **タイトル**: `semibold`, 中央絶対配置。
- **ボタン**: Ghostスタイル。モバイル用のハンバーガーメニュー、デスクトップ/モバイル共通の「New」ボタン。

---

## 2. Empty State（初期画面）

### デザインコンセプト "The Core"

- **ネオン・ヘキサゴン**: 中央に回転する幾何学的な六角形を配置。
- **サイバーパンク演出**: `accent` カラーのグロー効果とアニメーションで「生きている」システムを表現。
- **ビルド情報**: 控えめにバージョン（ビルド日時）を表示。

### ビジュアル仕様

- **中央アイコン**: 二重の六角形。外側は静的、内側は回転アニメーション。`accent` カラーで発光。
- **タイトル**: 「EgoGraph」の文字をグラデーションで表示。
- **サブテキスト**: "Ready to archive your digital life" + パルスするインジケーター。

### アニメーション

- **Fade In**: 画面表示時に全体がフェードイン。
- **Spin**: 内側の六角形がゆっくりと回転。
- **Pulse**: 外側のグロー効果とサブテキストのドットが点滅。

---

## 3. メッセージ入力エリア

### デザインコンセプト

- **一体感のあるデザイン**: 入力エリアの背景色を `secondary` にし、サイドバーやアバターとの統一感を持たせる。
- **フレームレス**: ボーダーを排し、背景色のみで領域を定義。シンプルな見た目を追求。
- **機能の統合**: 送信ボタンとモデル選択をテキストエリア内に配置。

### ビジュアル仕様

```
┌──────────────────────────────────────────────────┐
│  メッセージを入力...                             │
│                                                  │
│                                                  │
│ [Model ▼]                                [ ➤ ]   │
└──────────────────────────────────────────────────┘
  ↑ 左下: モデル選択                右下: 送信ボタン ↑
```

### スタイル仕様

- **コンテナ**: `secondary` 背景色、角丸 (`rounded-lg`)。
- **テキストエリア**:
  - 背景色 `secondary` (コンテナと同一)。
  - ボーダーなし。
  - フォーカス時に `accent` リングを表示。
  - 上部 `pt-4`, 下部 `pb-12` で十分な余白を確保。
- **送信ボタン**:
  - 入力エリア内、右下 (`bottom-2.5 right-3`) に絶対配置。
  - アイコンのみのボタンスタイル。
- **モデル選択**:
  - 入力エリア内、左下 (`bottom-2.5 left-3`) に絶対配置。
  - 現在のモデル名を表示するバッジスタイル。

---

## 4. サイドバー

### デザインコンセプト

- **コンテキストの分離**: メインエリアとは異なる背景色 (`secondary`) で領域を区別。
- **カードスタイル**: 履歴アイテムを独立したカードとして表現。
- **レスポンシブ**: モバイルではオーバーレイ、デスクトップでは常時表示。

### ビジュアル仕様

- **背景色**: `secondary` カラー。
- **リストアイテム**:
  - カードスタイル (`border` + `bg-background`).
  - 選択時は `accent` 背景 + 白文字。
  - 日付とタイトルを表示。

---

## 5. メッセージ表示

### デザインコンセプト

- **明確な対比**: ユーザー（背景あり） vs AI（背景なし・アイコン強調）。
- **幾何学アバター**: ユーザー = 正方形、AI = 六角形（サイバーシアン）。

### ビジュアル仕様

```
┌──────────────────────────────────────────────────┐
│  ■  ユーザーメッセージ                           │ ← 背景: muted
│     今日のSpotifyの再生履歴は？                  │
└──────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────┐
│  ⬡  AIメッセージ                                 │ ← 背景なし
│     今日の再生履歴は以下の通りです...            │
└──────────────────────────────────────────────────┘
```

### スタイル仕様

- **ユーザーメッセージ**:
  - 背景色 `muted`。
  - アバター: `secondary` 背景の正方形アイコン。
- **AIメッセージ**:
  - 背景色なし（透明）。
  - アバター: `accent` カラーの六角形アイコン + グロー効果。
- **コンテンツ**: Markdown形式のレンダリング対応。

---

## 6. その他コンポーネント

### 6.1 ローディングスケルトン

- メッセージ読み込み中に表示。
- スケルトンアバターとテキストラインで構成。
- `pulse` アニメーションで読み込み中を表現。

### 6.2 トースト通知

- エラーや成功メッセージを表示するトースト。
- 右下にスライドアップで表示。
- エラーは `destructive`、成功は `success` カラーを使用。

### 6.3 オーバーレイ（モバイルサイドバー用）

- サイドバー展開時の背景ブラックマスク。
- フェードインアニメーション。
- タップでサイドバーを閉じる機能。

---

## 実装優先順位

以下の順序で実装することを推奨します：

1. **デザイントークン更新** (`src/index.css`)
   - カラーパレット、フォント、スペーシング

2. **基本コンポーネント**
   - ボタン、インプット、カード

3. **レイアウト**
   - ヘッダー、サイドバー

4. **メッセージ表示**
   - アバター、メッセージコンテナ

5. **入力エリア**
   - モデルバッジ統合、送信ボタングロー

6. **Empty State**
   - サイバーアイコン、テキスト

7. **細部の調整**
   - アニメーション、ホバーエフェクト（デスクトップ）

---

## デザイントークン参照

詳細なデザイントークン（カラー、タイポグラフィ、スペーシングなど）は、
[デザインシステム](./0002_design_system.md) を参照してください。

---

## まとめ

本コンポーネント設計は、**Digital Minimalism** のコンセプトに基づき、
以下の特徴を持ちます：

- **極限のシンプルさ**: フラット、ボーダーのみ、余白重視
- **サイバーシアンのシグネチャー**: 送信ボタン、AIアバター、選択状態に限定使用
- **幾何学的アイコン**: 正方形（ユーザー）、六角形（AI）
- **モバイルファースト**: ホバーエフェクトなし、タップ時のフィードバックのみ
- **タイポグラフィ重視**: DM Sans + JetBrains Mono で美しい文字組み

この設計に従うことで、EgoGraphは汎用的なチャットUIを超越した、
唯一無二のプロダクト体験を提供します。
